# 🤖 בוט טלגרם לניהול שליחויות ומלאי

בוט טלגרם מתקדם לניהול וסיכום שליחויות + ניהול מלאי מקיף עם תמיכה מלאה בעברית.

## 🚀 תכונות עיקריות

### 📦 ניהול שליחויות
- רישום שליחויות חדשות במהירות
- תיעוד מלא: נמען, פריט, סכום, כתובת, טלפון, תאריך
- 🤖 **חילוץ חכם** - חילוץ אוטומטי של נתונים מהודעות לקוחות (חדש!)
- זיהוי אוטומטי של תאריכים ושעות
- רישום אוטומטי של אנשי קשר חדשים

### 📊 סיכומים מתקדמים
- סיכומים יומיים, שבועיים וחודשיים
- סיכומים לפי אדם ספציפי
- סיכומים לתאריכים מותאמים אישית
- הצגת סה"כ סכומים ומספר שליחויות

### 👥 ניהול אנשי קשר מתקדם
- הוספה ידנית ו-המונית של אנשי קשר
- חיפוש מהיר לפי שם או חלק משם
- מחיקה בטוחה של אנשי קשר
- ייבוא וייצוא של רשימת אנשי קשר
- רישום אוטומטי של אנשי קשר חדשים
- שליחות לאנשי קשר חדשים במהלך הרישום

### ⏰ סיכומים אוטומטיים
- שליחה יומית של סיכום היום הקודם
- סיכום שבועי בכל יום ראשון
- סיכום חודשי בכל חודש
- אפשרות להרשמה וביטול הרשמה

### 📦 ניהול מלאי מתקדם
- הוספת פריטים למלאי עם כמות ומחיר
- עדכון כמויות קיימות
- חיפוש במלאי לפי שם או קטגוריה
- מחיקת פריטים מהמלאי
- דו"חות מלאי מפורטים עם ערך כולל
- ארגון לפי קטגוריות

## 🛠️ התקנה והפעלה

### דרישות מערכת
- Node.js 14.0 ואילך
- npm או yarn
- טוקן בוט מ-BotFather בטלגרם

### הוראות התקנה

1. **שכפל את הפרויקט:**
   ```bash
   git clone [repository-url]
   cd telegram-bot
   ```

2. **התקן תלויות:**
   ```bash
   npm install
   ```

3. **הגדר משתני סביבה:**
   ```bash
   cp .env.example .env
   # ערוך את הקובץ .env והכנס את טוקן הבוט
   ```

4. **הפעל את הבוט:**
   ```bash
   npm start
   ```

### הגדרת טוקן בוט

1. פתח שיחה עם [@BotFather](https://t.me/BotFather) בטלגרם
2. צור בוט חדש עם `/newbot`
3. בחר שם לבוט
4. העתק את הטוקן לקובץ `.env`

## 📱 שימוש בבוט

### פקודות בסיסיות
- `/start` או `התחלה` - התחלת השיחה
- `🤖 חילוץ חכם` - חילוץ אוטומטי של נתונים מהודעות לקוחות (חדש!)
- `יומי` - סיכום יומי
- `שבועי` - סיכום שבועי
- `חודשי` - סיכום חודשי
- `אנשי קשר` - ניהול אנשי קשר

### רישום שליחות

#### 🤖 חילוץ חכם (מומלץ!)
1. לחץ על כפתור "חילוץ חכם"
2. העתק הודעה מלקוח (מווטסאפ, SMS, אימייל)
3. הבוט יחלץ אוטומטי: שם לקוח, מוצר, מחיר, כתובת, טלפון
4. אשר את הנתונים ושמור

**דוגמאות הודעות לקוחות:**
- `"שלום דני, המנורה עולה 250₪, הכתובת שלך תל אביב רחוב הרצל 15, הטלפון 050-1234567"`
- `"היי רחל! השולחן מוכן. מחיר 500 שקלים. אני אגיע לרעננה ברחוב בן גוריון 8. התקשרי 052-9876543"`

#### רישום ידני
```
[שם הנמען] [פריט] [סכום] [כתובת] [טלפון] [תאריך אופציונלי]
```

**דוגמאות:**
- `יוסי כהן שולחן 500 תל אביב 050-1234567`
- `שרה לוי כיסא 120 חיפה 052-9876543 אתמול ב-19:30`

### סיכומים מתקדמים
- `יומי [שם]` - סיכום יומי לאדם ספציפי
- `שבועי [שם]` - סיכום שבועי לאדם ספציפי
- `חודשי [שם]` - סיכום חודשי לאדם ספציפי
- `מצא [שם]` - כל הרשומות של אדם ספציפי
- `סיכום [תאריך] [שם]` - סיכום ליום ספציפי

### ניהול אנשי קשר
- `אנשי קשר` - תפריט ניהול אנשי קשר מתקדם
- `הוסף איש קשר חדש` - הוספה ידנית של איש קשר
- `הצג אנשי קשר` - רשימה מלאה של אנשי הקשר
- `חפש איש קשר` - חיפוש לפי שם או חלק משם
- `מחק איש קשר` - מחיקת איש קשר ספציפי
- `ייבא אנשי קשר` - הוספה המונית מרשימה
- `ייצא אנשי קשר` - גיבוי של כל אנשי הקשר
- `שליחות לאיש קשר חדש` - רישום שליחות והוספת נמען חדש
- `שליחות חדשה` - רישום מהיר עם בחירת נמען קיים

### סיכומים אוטומטיים
- `הרשמה` - הרשמה לקבלת סיכומים אוטומטיים
- `ביטול הרשמה` - ביטול הרשמה לסיכומים

### ניהול מלאי
- `ניהול מלאי` - כניסה לתפריט ניהול המלאי
- `הוסף פריט למלאי` - הוספת פריט חדש
- `הצג מלאי` - הצגת כל המלאי
- `עדכן כמות` - עדכון כמות של פריט קיים
- `מחק פריט` - מחיקת פריט מהמלאי
- `חפש במלאי` - חיפוש פריטים
- `דו״ח מלאי` - דו"ח מפורט עם סטטיסטיקות

### הוספת פריט למלאי
```
שם הפריט כמות מחיר [קטגוריה] [תיאור]
```

**דוגמאות:**
- `שולחן 5 500 רהיטים שולחן עץ מלא`
- `כיסא 12 120 רהיטים`
- `מנורה 3 250 תאורה מנורת שולחן`

## 🔧 תיקונים שבוצעו

הבוט עבר שדרוג משמעותי עם תיקוני באגים וביטחון:

✅ **בטיחות ואבטחה** - הגנה על טוקן הבוט וטיפול בשגיאות
✅ **ניהול זיכרון** - מניעת דליפות זיכרון
✅ **יציבות** - טיפול מקיף בשגיאות
✅ **ביצועים** - אופטימיזציה של פעולות מסד נתונים
✅ **חווית משתמש** - הודעות שגיאה ברורות

## 🗂️ מבנה הפרויקט

```
├── index.js                    # קובץ הבוט הראשי
├── smart-parser.js             # מערכת חילוץ נתונים חכמה (חדש!)
├── data.db                     # מסד נתונים SQLite
├── package.json                # תלויות הפרויקט
├── .env.example                # דוגמה למשתני סביבה
├── .gitignore                  # קבצים להתעלמות
├── README.md                   # מסמך זה
├── FIXES_SUMMARY.md            # סיכום התיקונים
├── INVENTORY_FEATURES.md       # מדריך ניהול מלאי
├── CONTACTS_GUIDE.md           # מדריך ניהול אנשי קשר
├── SMART_EXTRACTION_GUIDE.md   # מדריך החילוץ החכם (חדש!)
├── SMART_EXTRACTION_SUMMARY.md # סיכום טכני של המערכת החכמה (חדש!)
└── test-smart-extraction.js    # בדיקות המערכת החכמה (חדש!)
```

## 🛡️ אבטחה

- טוקן הבוט מוגדר כמשתנה סביבה
- מסד הנתונים מקומי (SQLite)
- אין אחסון של מידע רגיש
- טיפול בשגיאות מקיף

## 🤝 תמיכה

לתמיכה טכנית או דיווח על באגים, פנה למפתח הבוט.

## 📜 רישיון

MIT License - ניתן לשימוש חופשי ושינוי הקוד.

---

## 🤖 מערכת החילוץ החכם - חדש!

המערכת החכמה מאפשרת לך לחסוך זמן רב על ידי חילוץ אוטומטי של נתונים מהודעות לקוחות:

### יתרונות:
- ⚡ **מהירות** - חיסכון בזמן מילוי ידני
- 🎯 **דיוק** - פחות שגיאות הקלדה
- � **נוחות** - העתקה ישירה מהודעות לקוחות
- 🧠 **חכמה** - זיהוי אוטומטי של דפוסים שונים

### מה המערכת מזהה:
- 👤 שמות לקוחות
- 🛍️ מוצרים ופריטים
- 💰 מחירים (₪, ש"ח, שקלים)
- 🏠 כתובות (עם ערים ישראליות)
- 📞 מספרי טלפון (ישראליים ובינלאומיים)

### שיעור הצלחה: 88%
המערכת מצליחה לחלץ נתונים מרבית הודעות הלקוחות בהצלחה!

לפרטים נוספים, ראה: `SMART_EXTRACTION_GUIDE.md`

---

**�💡 טיפ:** השתמש בפקודה `התחלה` כדי לקבל רשימה מלאה של כל הפקודות הזמינות!

**🤖 טיפ חדש:** נסה את המערכת החכמה - היא תחסוך לך זמן רב!